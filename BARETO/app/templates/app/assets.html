{% extends 'app/base.html' %}

{% block title %}Assets{% endblock %}

{% block content %}

{% if error %}
<div class="alert alert-danger alert-dismissible fade show" role="alert">
    {% for field, values in error.items %}
           {% for err in values %}
                {{field}}: {{ err|escape }}
           {% endfor %}
      {% endfor %}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
</div>
{% endif %}
<div class="card">
    <div class="card-body">
        <table id="assets-table" class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Risk</th>
                    <th>Project</th>
                    <th>Vulnerabilities</th>
                </tr>
            </thead>
            <tbody>
                {% for asset in assets %}
                <td>{{asset.name}}</td>
                <td>{{asset.type}}</td>
                <td>{{asset.risk}}</td>
                <td><a href="{% url 'project_info' project=asset.project.id %}">{{asset.project.name}}</a></td>
                <td>{{asset.vulnerabilities}}</td>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% block js %}
<script>
$(document).ready(function(){
	$('#assets-table').DataTable();
});
</script>
{% endblock %}